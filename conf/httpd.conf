<IfDefine Linux>
    LoadModule mpm_event_module ${ModulesDir}/mod_mpm_event.so
    TypesConfig /etc/mime.types
</IfDefine>
<IfDefine Windows>
    TypesConfig ${ServerRoot}/conf/mime.types
</IfDefine>
<IfModule !log_config_module>
    LoadModule log_config_module ${ModulesDir}/mod_log_config.so
</IfModule>
LoadModule mime_module ${ModulesDir}/mod_mime.so
LoadModule alias_module ${ModulesDir}/mod_alias.so
LoadModule dir_module ${ModulesDir}/mod_dir.so
LoadModule headers_module ${ModulesDir}/mod_headers.so
LoadModule authn_core_module ${ModulesDir}/mod_authn_core.so
LoadModule authz_core_module ${ModulesDir}/mod_authz_core.so
LoadModule authz_user_module ${ModulesDir}/mod_authz_user.so
LoadModule proxy_module ${ModulesDir}/mod_proxy.so
LoadModule proxy_http_module ${ModulesDir}/mod_proxy_http.so
LoadModule ssl_module ${ModulesDir}/mod_ssl.so
LoadModule socache_shmcb_module ${ModulesDir}/mod_socache_shmcb.so

PidFile ${InstanceRoot}/logs/httpd.pid
ErrorLog ${ErrorLog}
TransferLog ${InstanceRoot}/logs/access.log
SSLSessionCache shmcb:${InstanceRoot}/logs/ssl_cache

Listen 443

SSLEngine On
SSLCertificateFile "${InstanceRoot}/conf/keystore.pem"
SSLProtocol -all TLSv1.3 TLSv1.2

DirectoryIndex index.html
DirectoryIndexRedirect on

<VirtualHost *:443>
	DocumentRoot "${InstanceRoot}/../psteniusubi.github.io"
	ServerName psteniusubi.example.com
	Alias "/push-demo" "${InstanceRoot}/docs"
	Alias "/webauthn-tester" "${InstanceRoot}/../webauthn-tester/docs"
</VirtualHost>

<VirtualHost *:443>
	DocumentRoot "${InstanceRoot}/../psteniusubi.github.io"
	ServerName api.example.com
	ProxyPass "/" "http://ubi-62:5000/" disablereuse=on retry=0
</VirtualHost>
